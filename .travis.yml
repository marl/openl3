dist: bionic

language: python

notifications:
    email: false

python:
    - "3.6"
    - "3.7"
    - "3.8"

before_install:
    - sudo apt-get update
    - sudo apt-get install -y python-skimage
    - sudo apt-get install -y ffmpeg
    - ffmpeg -hwaccels

install:
    - pip install tensorflow
    - pip install pytest
    - pip install pytest-cov
    - pip install python-coveralls
    - pip install Cython
    - pip install -e .[tests]

#before_script:
#    - pep8 tests

script:
#    - nosetests -v --with-coverage --cover-package=mir_eval
#    - python setup.py build_sphinx
#    - python setup.py egg_info -b.dev sdist --formats gztar
     - while sleep 9m; do echo "=====[ $SECONDS seconds still running ]====="; done &
     - py.test
     - kill %1

after_success:
    - coveralls
